var express=require("express"),app=express(),mongojs=require("mongojs"),db=mongojs("emplist",["emplist"]),bodyParser=require("body-parser");app.use(express["static"](__dirname+"/public")),app.use(bodyParser.json()),app.get("/emplist",function(req,res){console.log("Get Req recieved"),db.emplist.find(function(err,docs){console.log(docs),res.json(docs)})}),app.post("/emplist",function(req,res){console.log(req.body),db.emplist.insert(req.body,function(err,doc){res.json(doc)})}),app["delete"]("/emplist/:id",function(req,res){console.log("Inside server");var id=req.params.id;console.log("Requested id"+id),db.emplist.remove({_id:mongojs.ObjectId(id)},function(err,doc){res.json(doc)})}),app.get("/emplist/:id",function(req,res){var id=req.params.id;console.log(id),db.emplist.findOne({_id:mongojs.ObjectId(id)},function(err,doc){res.json(doc)})}),app.put("/emplist/:id",function(req,res){var id=req.params.id;console.log(req.body.name),console.log(req.body._id),db.emplist.findAndModify({query:{_id:mongojs.ObjectId(id)},update:{$set:{name:req.body.name,email:req.body.department,number:req.body.salary}},"new":!0},function(err,doc){res.json(doc)})}),app.listen(3001),console.log("Server is listening at 3030 post");